---
import { Image } from 'astro:assets'
---

<details class="photo-gallery">
  <summary class="gallery-summary">
    <div class="summary-overlay">Photos</div>
    <div class="article-photos">
      <!-- <Image src={photo1} alt="Gray" class="article-photo" />
      <Image src={photo2} alt="Gray" class="article-photo" />
      <Image src={photo3} alt="Gray" class="article-photo" />
      <Image src={photo4} alt="Gray" class="article-photo" /> -->
    </div>
  </summary>
  <div class="expanded-content">
    <!-- Additional content when expanded, if needed -->
  </div>
</details>

<style>
  /* Progressive enhancement: Enable smooth height transitions in supporting browsers */
  @supports (interpolate-size: allow-keywords) {
    .photo-gallery {
      interpolate-size: allow-keywords;
    }

    .gallery-summary {
      overflow: clip; /* Prevent content bleeding during animation */
      transition: height 0.4s ease;
    }

    .photo-gallery[open] .gallery-summary {
      overflow: visible;
    }
  }

  .photo-gallery {
    overflow: hidden;
    width: 100%;
    border-radius: 24px;
  }

  .gallery-summary {
    cursor: pointer;

    position: relative;

    overflow: hidden;
    display: block;

    height: 70px;

    list-style: none;
  }

  .gallery-summary::-webkit-details-marker {
    display: none;
  }

  .gallery-summary::marker {
    display: none;
  }

  .photo-gallery[open] .gallery-summary {
    height: auto;
  }

  .photo-gallery[open] .summary-overlay {
    opacity: 0;
    filter: blur(6px);
  }

  .summary-overlay {
    pointer-events: none;

    position: absolute;
    z-index: 10;
    top: 0;
    right: 0;
    left: 0;

    padding: 1rem;

    font-variation-settings: 'wght' 600;
    color: white;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);

    opacity: 1;
    filter: blur(0px);

    transition:
      opacity 0.3s ease,
      filter 0.3s ease;
  }

  .article-photos {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5px;
    width: 100%;
  }

  .article-photo {
    aspect-ratio: 1/1;
    width: calc(50% - 1.5px);
    height: auto;
    object-fit: cover;
  }

  .expanded-content {
    display: none;
  }
</style>
