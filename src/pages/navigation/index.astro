---
import Home from '../../components/Home.astro'
import Layout from '../../layouts/Layout.astro'
import NavigationMenu from '../../components/NavigationMenu.astro'
---

<Layout navigationOpened={true}>
  <Home navigationOpened={true} />
  <div class="navigation-overlay" id="navigation-overlay">
    <div class="navigation-container" id="navigation-container">
      <NavigationMenu opened={true} />
    </div>
  </div>
</Layout>

<script>
  import { navigate } from 'astro:transitions/client'

  document.addEventListener('astro:page-load', () => {
    const overlay = document.getElementById('navigation-overlay')

    const handleClose = () => {
      navigate('/')
    }

    overlay?.addEventListener('click', (e) => {
      handleClose()
    })
  })
</script>

<style>
  :root:has(.navigation-overlay) {
    overflow: hidden;
  }

  .navigation-overlay {
    position: fixed;
    z-index: 200;
    top: 0;
    left: 0;

    width: 100%;
    height: 100%;

    background-color: rgba(255, 255, 255, 0.6);
    -webkit-backdrop-filter: blur(24px);
    backdrop-filter: blur(24px);

    view-transition-name: overlay;
  }

  .navigation-container {
    position: relative;

    display: flex;
    align-items: end;

    width: 100%;
    max-width: 1024px;
    height: 100%;
    margin: 0 auto;
    padding-right: 4%;
    padding-left: 4%;
  }
</style>
